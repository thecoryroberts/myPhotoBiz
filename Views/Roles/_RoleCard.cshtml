@model MyPhotoBiz.ViewModels.RoleViewModel
<div class="col-md-6 col-lg-3 role-card" data-role-id="@Model.RoleId">
    <div class="card">
        <div class="card-body d-flex flex-column justify-content-between">
            <div class="d-flex align-items-center mb-4">
                <div class="flex-shrink-0">
                    <div class="avatar-xl rounded-circle bg-@(Model.Color)-subtle d-flex align-items-center justify-content-center">
                        <i class="ti @Model.Icon fs-24 text-@(Model.Color)"></i>
                    </div>
                </div>
                <div class="ms-3">
                    <h5 class="mb-2">@Model.RoleName</h5>
                    <p class="text-muted mb-0 fs-base">
                        @Model.Description
                    </p>
                </div>
                <div class="ms-auto">
                    <div class="dropdown">
                        <a href="#" class="text-muted fs-xl" data-bs-toggle="dropdown">
                            <i class="ti ti-dots-vertical"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a class="dropdown-item view-role" href="#" data-role-id="@Model.RoleId">
                                    <i class="ti ti-eye me-2"></i>View
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item edit-role" href="#" data-role-id="@Model.RoleId" data-role-name="@Model.RoleName">
                                    <i class="ti ti-edit me-2"></i>Edit
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item text-danger delete-role" href="#" data-role-id="@Model.RoleId"
                                   data-role-name="@Model.RoleName">
                                    <i class="ti ti-trash me-2"></i>Remove
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <ul class="list-unstyled mb-3">
                @foreach (var permission in Model.Permissions)
                {
                    <li class="d-flex align-items-center mb-2">
                        <span class="ti ti-check fs-lg text-success me-2"></span> @permission
                    </li>
                }
            </ul>

            <p class="mb-2 text-muted">Total @Model.UserCount users</p>
            <div class="avatar-group avatar-group-sm mb-3">
                @for (int i = 0; i < Math.Min(Model.Users?.Count ?? 0, 4); i++)
                {
                    var u = Model.Users[i];
                    var avatarUrl = u?.ProfilePicture ?? ("~/images/users/user-" + ((i % 10) + 1) + ".jpg");
                    <div class="avatar">
                        <img src="@Url.Content(avatarUrl)" alt="@u?.FullName" class="rounded-circle avatar-sm" />
                    </div>
                }
                @if (Model.UserCount > 4)
                {
                    <div class="avatar avatar-sm" data-bs-toggle="tooltip" data-bs-placement="top" 
                         title="@(Model.UserCount - 4) More">
                        <span class="avatar-title text-bg-primary rounded-circle fw-bold">
                            +@(Model.UserCount - 4)
                        </span>
                    </div>
                }
            </div>

            <div class="d-flex justify-content-between align-items-center">
                <span class="text-muted fs-xs">
                    <i class="ti ti-clock me-1"></i>Updated @Model.LastUpdated.ToString("MMM dd, yyyy")
                </span>
                <a href="#" class="btn btn-sm btn-outline-@(Model.Color) rounded-pill view-role" data-role-id="@Model.RoleId">Details</a>
            </div>
        </div>
    </div>
</div>
